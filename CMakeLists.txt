cmake_minimum_required (VERSION 3.5)
set(CMAKE_CXX_FLAGS_RELEASE "-O3")
set(CMAKE_CXX_FLAGS_DEBUG "-DDEBUG -g")
set(CMAKE_CXX_FLAGS "-Wno-deprecated")
set(CMAKE_CXX_FLAGS "-Wno-deprecated-declarations")
set(CMAKE_CXX_FLAGS "-pthread")

include_directories(vendor/libosmium/include)
include_directories(vendor/protozero/include)
include_directories(vendor/s2geometry/src)
include_directories(vendor/CRoaring)
include_directories(vendor/cxxopts/include)
include_directories(/usr/local/include)
include_directories(depends)
include_directories(include)
link_directories(vendor/s2geometry)
link_directories(/usr/local/lib)
link_directories(vendor/CRoaring)

add_executable(osmx src/main.cpp src/storage.cpp src/expand.cpp src/extract.cpp src/update.cpp src/region.cpp)
target_link_libraries(osmx lmdb z expat bz2 s2 capnp kj roaring)
set_property(TARGET osmx PROPERTY CXX_STANDARD 14)

add_executable(osmxTest test/test_region.cpp src/region.cpp)
set_property(TARGET osmxTest PROPERTY CXX_STANDARD 14)
include_directories(include)
include_directories(vendor/catch2/single_include)
target_link_libraries(osmxTest s2)
enable_testing()
add_test(osmxTest osmxTest)
